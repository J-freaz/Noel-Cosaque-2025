<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Repas de NoÃ«l en Famille ğŸ„</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Neige -->
  <div id="snow-container"></div>

  <div class="page">
    <header class="header">
      <h1>Repas de NoÃ«l en Famille ğŸ„</h1>
      <p>Qui apporte quoi ? Qui achÃ¨te quoi ? Tout est ici ğŸ˜‡</p>
      <p class="subtitle" id="countdown"></p>

      <div class="header-actions">
        <button id="music-toggle" class="btn btn-ghost">
          ğŸ¶ Activer la musique de NoÃ«l
        </button>
      </div>
    </header>

    <main class="main">
      <!-- FORMULAIRE CONTRIBUTION (PLATS) -->
      <section class="form-section">
        <h2>Ajouter sa contribution âœï¸</h2>
        <form id="contrib-form">
          <div class="field">
            <label for="nom">Nom</label>
            <input type="text" id="nom" name="nom" required />
          </div>

          <!-- SÃ©lecteur Plat / Boisson -->
          <div class="field">
            <label for="plat">Plat / Boisson</label>
            <select id="plat" name="plat" required>
              <option value="">â€“ Choisir â€“</option>

              <!-- ğŸ¥‚ APÃ‰RITIF & ENTRÃ‰ES -->
              <option value="ApÃ©ritif">ApÃ©ritif</option>
              <option value="Boisson">Boisson</option>
              <option value="Toats">Toats</option>
              <option value="Petits fours">Petits fours</option>
              <option value="Saumon">Saumon</option>
              <option value="Foie gras">Foie gras</option>

              <!-- ğŸ– PLATS VIANDES -->
              <option value="Jambon de NoÃ«l">Jambon de NoÃ«l</option>
              <option value="Boudin">Boudin</option>
              <option value="Viande froide : rÃ´ti de porc">Viande froide : rÃ´ti de porc</option>
              <option value="Viande froide : rosbeef">Viande froide : rosbeef</option>

              <!-- ğŸ½ï¸ ACCOMPAGNEMENTS -->
              <option value="Pommes dauphines">Pommes dauphines</option>
              <option value="Salade">Salade</option>

              <!-- ğŸ§€ DESSERTS -->
              <option value="Fromage">Fromage</option>
              <option value="BÃ»che de NoÃ«l">BÃ»che de NoÃ«l</option>
              <option value="ClÃ©mentine">ClÃ©mentine</option>

              <!-- ğŸ“ DIVERS -->
              <option value="Divers">Divers (Ã  prÃ©ciser)</option>
            </select>
          </div>

          <!-- Champ Divers -->
          <div class="field" id="divers-field" style="display:none;">
            <label for="plat-divers">PrÃ©cise le plat / boisson</label>
            <input type="text" id="plat-divers" placeholder="Ex : TaboulÃ© maison" />
          </div>

          <div class="field">
            <label for="type">Type</label>
            <select id="type" name="type" required>
              <option value="">â€“ Choisir â€“</option>
              <option value="EntrÃ©e">EntrÃ©e</option>
              <option value="Plat">Plat</option>
              <option value="Dessert">Dessert</option>
              <option value="Boisson">Boisson</option>
              <option value="Autre">Autre</option>
            </select>
          </div>

          <div class="field">
            <label for="quantite">QuantitÃ© / DÃ©tail</label>
            <input type="text" id="quantite" name="quantite" placeholder="Ex : pour 6 pers, 2 bouteillesâ€¦" />
          </div>

          <div class="field checkbox-field">
            <label for="achete">
              <input type="checkbox" id="achete" name="achete" />
              Je mâ€™occupe aussi de lâ€™acheter ğŸ›’
            </label>
          </div>

          <div class="field">
            <label for="remarques">Allergies / Remarques</label>
            <textarea id="remarques" name="remarques" rows="3" placeholder="Sans gluten, sans porc, vÃ©gÃ©tarienâ€¦"></textarea>
          </div>

          <button type="submit" class="btn btn-block">Ajouter</button>
          <p id="form-message" class="form-message"></p>
        </form>
      </section>

      <!-- LISTE DES CONTRIBUTIONS -->
      <section class="list-section">
        <h2>Liste des contributions ğŸ</h2>
        <div id="loading">Chargement de la listeâ€¦</div>

        <div class="table-container">
          <table id="contrib-table" class="table hidden">
            <thead>
              <tr>
                <th>Nom</th>
                <th>Type</th>
                <th>Plat / Boisson</th>
                <th>QuantitÃ©</th>
                <th>AchÃ¨te ?</th>
                <th>Allergies / Remarques</th>
              </tr>
            </thead>
            <tbody id="contrib-tbody">
              <!-- Lignes remplies en JS -->
            </tbody>
          </table>
        </div>

        <!-- RÃ‰CAP QUANTITÃ‰S PAR PLAT -->
        <h3 style="margin-top: 18px; font-size: 1rem;">RÃ©cap des plats ğŸ§®</h3>
        <ul id="dish-summary" class="summary-list">
          <!-- rempli en JS -->
        </ul>
      </section>
    </main>

    <!-- SUIVI DES DÃ‰PENSES -->
    <section class="list-section" style="margin-top: 24px;">
      <h2>Suivi des dÃ©penses ğŸ’¶</h2>

      <div class="field" style="margin-bottom: 14px;">
        <p style="font-size: 0.9rem; opacity: 0.9;">
          Chacun peut ajouter ses achats pour quâ€™on voie combien on a dÃ©pensÃ© au total.
        </p>
      </div>

      <form id="purchase-form">
        <div class="field">
          <label for="achat-nom">Nom</label>
          <input type="text" id="achat-nom" name="achat-nom" required />
        </div>

        <div class="field">
          <label for="achat-article">Article / dÃ©pense</label>
          <input type="text" id="achat-article" name="achat-article" required />
        </div>

        <div class="field">
          <label for="achat-montant">Montant (â‚¬)</label>
          <input type="number" step="0.01" id="achat-montant" name="achat-montant" required />
        </div>

        <div class="field">
          <label for="achat-commentaire">Commentaire (optionnel)</label>
          <textarea id="achat-commentaire" name="achat-commentaire" rows="2"
            placeholder="Ex : partagÃ© Ã  3, promo, etc."></textarea>
        </div>

        <button type="submit" class="btn btn-block">Ajouter lâ€™achat</button>
        <p id="purchase-message" class="form-message"></p>
      </form>

      <div id="purchase-loading" style="margin-top: 16px;">Chargement des achatsâ€¦</div>

      <div class="table-container" style="margin-top: 10px;">
        <table id="purchase-table" class="table hidden">
          <thead>
            <tr>
              <th>Nom</th>
              <th>Article</th>
              <th>Montant (â‚¬)</th>
              <th>Commentaire</th>
            </tr>
          </thead>
          <tbody id="purchase-tbody">
            <!-- rempli en JS -->
          </tbody>
        </table>
      </div>

      <p id="purchase-total" style="margin-top: 10px; font-weight: 600;"></p>

      <h3 style="margin-top: 18px; font-size: 1rem;">Total par personne ğŸ‘‡</h3>
      <ul id="purchase-summary" class="summary-list">
        <!-- rempli en JS -->
      </ul>
    </section>

    <footer class="footer">
      <p>Fait avec â¤ï¸ pour la famille | NoÃ«l <span id="year"></span></p>
    </footer>
  </div>

  <!-- Audio (optionnel) -->
  
  <!-- ajoutes des fichiers mp3 dans le repo, branche-les ici -->
  <audio id="bg-music" loop>
    <!-- <source src="cloche.mp3" type="audio/mpeg" /> -->
  </audio>
  <audio id="click-sound">
    <source src="cloche.mp3" type="audio/mpeg" />
  </audio>

  <script src="script.js"></script>
</body>
</html>
